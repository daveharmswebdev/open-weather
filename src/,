'use strict';

describe("A spy", function() {
  var model, bar = null;

  beforeEach(function() {
    model = require('../model');

    spyOn(model, 'test');

    model.setBar(123);
    model.setBar(456, 'another param');
  });

  it("tracks that the spy was called", function() {
    expect(model.setBar).toHaveBeenCalled();
  });

  it("tracks all the arguments of its calls", function() {
    expect(model.setBar).toHaveBeenCalledWith(123);
    expect(model.setBar).toHaveBeenCalledWith(456, 'another param');
  });

  it("stops all execution on a function", function() {
    expect(bar).toBeNull();
  });
});
